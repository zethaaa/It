<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="default" namespace="/" extends="struts-default">
        
        <interceptors>
            <interceptor name="sessionCheck" class="controller.SessionInterceptor"/>
            <interceptor-stack name="appStack">
                <interceptor-ref name="sessionCheck"/>
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>
        </interceptors>

        <!-- Acción de login: SIN protección -->
        <action name="login" class="controller.LoginAction">
            <result name="success" type="redirectAction">menu</result>
            <result name="input">/it/login.jsp</result>
            <result name="error">/it/error.jsp</result>
        </action>

        <action name="menu" class="controller.MenuAction">
            <interceptor-ref name="appStack"/>
            <result>/it/menu.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>
        </action>

        <action name="PacienteList" class="controller.PacienteListAction">
            <interceptor-ref name="appStack"/>
            <result>/it/pacientes.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>

        <action name="PacienteNew" class="controller.PacienteNewAction">
            <interceptor-ref name="appStack"/>

            <result>/it/nuevoPaciente.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>
        
        <action name="PacienteSave" class="controller.PacienteSaveAction">
            <interceptor-ref name="appStack"/>

            <result type="redirectAction">PacienteList</result>
            <result name="input">/it/nuevoPaciente.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>
        
        <action name="PacienteEdit" class="controller.PacienteEditAction">
            <interceptor-ref name="appStack"/>
            <result>/it/editarPaciente.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>

        <action name="PacienteUpdate" class="controller.PacienteUpdateAction">
            <interceptor-ref name="appStack"/>
            <result type="redirectAction">PacienteList</result>
            <result name="input">/it/editarPaciente.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>

        <action name="PacienteDelete" class="controller.PacienteDeleteAction">
            <interceptor-ref name="appStack"/>
            <result type="redirectAction">PacienteList</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>
        
        <action name="CitaList" class="controller.CitaListAction">
            <interceptor-ref name="appStack"/>
            <result>/it/cita.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>
        </action>
        
        
        <action name="CitaNew" class="controller.CitaNewAction">
            <interceptor-ref name="appStack"/>
            <result>/it/nuevoCita.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>
        </action>
        
        <action name="CitaSave" class="controller.CitaSaveAction">
            <interceptor-ref name="appStack"/>

            <result type="redirectAction">CitaList</result>
            <result name="input">/it/nuevoCita.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>
        
        <action name="CitaEdit" class="controller.CitaEditAction">
            <interceptor-ref name="appStack"/>
            <result>/it/editarCita.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>
        <action name="CitaUpdate" class="controller.CitaUpdateAction">
            <interceptor-ref name="appStack"/>
            <result type="redirectAction">CitaList</result>
            <result name="input">/it/editarCita.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>
        
        <action name="CitaDelete" class="controller.CitaDeleteAction">
            <interceptor-ref name="appStack"/>
            <result type="redirectAction">CitaList</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>

        </action>
        
        <action name="HistorialList" class="controller.HistorialListAction">
            <interceptor-ref name="appStack"/>
            <result>/it/historial.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>
        </action>

        <action name="HistorialNew" class="controller.HistorialNewAction">
            <result>/it/nuevoHistorial.jsp</result>
            <result name="error">/error.jsp</result>
            <interceptor-ref name="appStack"/>
        </action>

        <action name="HistorialSave" class="controller.HistorialSaveAction">
            <result type="redirectAction">HistorialList</result>
            <result name="input">/it/nuevoHistorial.jsp</result>
            <result name="error">/error.jsp</result>
            <interceptor-ref name="appStack"/>
        </action>


        <action name="HistorialEdit" class="controller.HistorialEditAction">
            <interceptor-ref name="appStack"/>
            <result>/it/editarHistorial.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>
        </action>

        <action name="HistorialUpdate" class="controller.HistorialUpdateAction">
            <interceptor-ref name="appStack"/>
            <result type="redirectAction">HistorialList</result>
            <result name="input">/it/editarHistorial.jsp</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>
        </action>

        <action name="HistorialDelete" class="controller.HistorialDeleteAction">
            <interceptor-ref name="appStack"/>
            <result type="redirectAction">HistorialList</result>
            <result name="error">/error.jsp</result>
            <result name="loginRedirect" type="redirectAction">login</result>
        </action>

        <action name="logout" class="controller.LogoutAction">
            <result type="redirectAction">login</result>
        </action>

    </package>
</struts>
